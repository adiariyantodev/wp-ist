const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;import*as favicon from"./uip-pro-favicon.min.js?ver=3.1.05";import*as siteTitle from"./uip-pro-site-title.min.js?ver=3.1.05";import*as googleAnalytics from"./uip-google-analytics.min.js?ver=3.1.05";import*as matomoAnalytics from"./uip-matomo-analytics.min.js?ver=3.1.05";import*as fathomAnalytics from"./uip-fathom-analytics.min.js?ver=3.1.05";import*as uipWooCommerce from"./uip-woocommerce.min.js?ver=3.1.05";export function moduleData(){return{components:{"uip-favicon":favicon.moduleData(),"uip-site-title":siteTitle.moduleData(),"uip-google-analytics":googleAnalytics.moduleData(),"uip-woocommerce":uipWooCommerce.moduleData(),"uip-matomo-analytics":matomoAnalytics.moduleData(),"uip-fathom-analytics":fathomAnalytics.moduleData()},props:{},data:function(){return{rg:!0,sp:!1,ul:window.uipressroute,userKey:"",validating:!1,userData:{},fa:0,strings:{thankYou:__("Thank you for installing UiPress 3 Pro","uipress-pro"),thankYouMessage:__("For pro features to work correctly, please add your pro licence below","uipress-pro"),register:__("Register","uipress-pro")}}},inject:["uipData","uipress","uiTemplate"],watch:{},mounted:function(){this.getData()},computed:{},methods:{getData(){if("production"==this.uiTemplate.display||"prod"==this.uiTemplate.display)return void(this.rg=!0);let t=this,i=new FormData;i.append("action","uip_get_pro_app_data"),i.append("security",uip_ajax.security),t.uipress.callServer(uip_ajax.ajax_url,i).then(i=>{i.error?t.uipress.notify(i.message,"","error",!0):i.uip_pro?(t.userData=i.uip_pro,setTimeout(t.consume,24e4),this.uiTemplate.proActivated=!0):(this.rg=!1,this.register())})},register(){this.sp=!0},saveData(t,i){let e=this,a=!1;"instance_id"in i&&(a=i.instance_id);let s=new FormData;s.append("action","uip_save_uip_pro_data"),s.append("security",uip_ajax.security),s.append("key",t),s.append("instance",a),s.append("multisite",e.uipData.options.multisite),s.append("networkActivated",e.uipData.options.networkActivated),s.append("primarySite",e.uipData.options.primarySite),e.uipress.callServer(uip_ajax.ajax_url,s).then(t=>{t.error&&e.uipress.notify(t.message,"","error",!0)})},removeData(){let t=new FormData;t.append("action","uip_remove_uip_pro_data"),t.append("security",uip_ajax.security),this.uipress.callServer(uip_ajax.ajax_url,t).then(t=>{})},consume(){let t=this,i=this.uipData.options.domain,e="";e+="?k="+this.userData.key,e+="&d="+i,e+="&instance="+this.userData.instance;let a=this.ul+"validate/"+e,s=new FormData;t.uipress.callServer(a,s).then(i=>{if(!(i instanceof Error||"false"==i.state))return"true"==i.state?(t.uipress.saveUserPreference("uipfa",2,!1),t.sp=!1,t.rg=!0,void(t.uiTemplate.proActivated=!0)):(t.rg=!0,void setTimeout(t.consume,3e5));t.uipress.getUserPreference("uipfa").then(i=>{i?(t.fa=parseInt(i),isNaN(t.fa)?t.fa=2:t.fa+=1):t.fa=2,t.fa<12?t.uipress.saveUserPreference("uipfa",t.fa,!1):(t.sp=!0,t.rg=!1,t.uipress.saveUserPreference("uipfa",2,!1),t.removeData(),t.uiTemplate.proActivated=!1)})})},onSubmit(){let t=this;this.validating=!0;let i=this.uipData.options.domain,e="";e+="?k="+this.userKey,e+="&d="+i,e+="&instance=";let a=this.ul+"validate/"+e,s=new FormData;t.uipress.callServer(a,s).then(i=>i.error?(t.validating=!1,void t.uipress.notify(i.message,"","error",!0)):i instanceof Error?(t.validating=!1,void t.uipress.notify(__("Check failed","uipress-pro"),__("Unable to contact licencing servers. Please try again later","uipress-pro"),"error",!0)):"false"==i.state?(t.validating=!1,void t.uipress.notify(i.message,"","error",!0)):"true"==i.state?(t.sp=!1,t.validating=!1,t.rg=!0,t.uipress.notify(__("Thank you!","uipress-pro"),__("Your key is valid and you can now use pro features","uipress-pro"),"success",!0),t.saveData(t.userKey,i),t.uipress.saveUserPreference("uipfa",2,!1),void(t.uiTemplate.proActivated=!0)):(t.validating=!1,void t.uipress.notify(__("Check failed","uipress-pro"),__("Something went wrong. Please try again later","uipress-pro"),"error",!0)))}},template:'\n\t<div id="notification-drop" class="uip-dark-mode">\n\t\t<div v-if="sp" class="uip-notification uip-padding-s uip-fade-in" style="width:auto;">\n\t\t\t<div class="uip-flex uip-gap-xs">\n\t\t\t\t<div class="uip-max-w-300">\n\t\t\t\t\t<div class="uip-text-bold uip-text-inverse uip-margin-bottom-xs">{{strings.thankYou}}</div>\n\t\t\t\t\t<div class="uip-text-s uip-text-normal uip-margin-bottom-s">{{strings.thankYouMessage}}</div>\n\t\t\t\t\t\n\t\t\t\t\t<form class="uip-flex uip-flex-row uip-gap-xs" @submit.prevent="onSubmit()">\n\t\t\t\t\t\t<input class="uip-input uip-flex-grow" type="text" v-model="userKey" placeholder="xxxx-xxxx-xxxx-xxxx" required>\n\t\t\t\t\t\t<label class="uip-button-primary uip-body-font uip-min-w-60 uip-flex uip-flex-middle uip-flex-row">\n\t\t\t\t\t\t\t<input v-show="!validating" type="submit" class="uip-blank-input uip-text-emphasis" :value="strings.register"/>\n\t\t\t\t\t\t\t<div><span v-show="validating" class="uip-load-spinner" ></span></div>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t\t<div class="uip-position-absolute uip-right-0 uip-top-0 uip-padding-s">\n\t\t\t\t\t<div class="uip-icon uip-margin-left-xs uip-cursor-pointer uip-link-default" @click="sp = false">close</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n  \x3c!--Pro Plugins--\x3e\n  <template v-if="rg">\n    <uip-favicon/>\n    <uip-site-title/>\n    <uip-google-analytics/>\n    <uip-woocommerce/>\n    <uip-matomo-analytics/>\n    <uip-fathom-analytics/>\n  </template>'}};