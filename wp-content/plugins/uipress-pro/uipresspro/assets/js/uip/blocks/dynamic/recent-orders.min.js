const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export default{props:{display:String,name:String,block:Object},data(){return{searchString:"",results:[],page:1,totalPages:0,perPage:this.block.settings.block.options.postsPerPage.value,postTypes:["shop_order"],limitToAuthor:!1,loading:!1,strings:{nothingFound:__("No posts found","uipress-lite"),by:__("By","uipress-lite"),order:__("Order","uipress-lite"),status:__("Status","uipress-lite"),total:__("Total","uipress-lite"),searchOrders:__("Search orders","uipress-lite")},searching:!1}},mounted(){this.getRecentOrders()},watch:{page:{handler(t,e){this.getRecentOrders()},deep:!0},perPage:{handler(t,e){this.getRecentOrders()},deep:!0},searchString:{handler(t,e){1!=this.page?this.page=1:this.getRecentOrders()},deep:!0},"block.settings.block.options.postsPerPage.value":{handler(t,e){this.getRecentOrders()},deep:!0}},computed:{returnPerPage(){return this.block.settings.block.options.postsPerPage.value},hasSearch(){return this.get_block_option(this.block,"block","hideSearch")}},methods:{async getRecentOrders(){if(this.loading)return;this.loading=!0;let t=new FormData;t.append("action","uip_get_recent_orders"),t.append("security",uip_ajax.security),t.append("search",this.searchString),t.append("page",this.page),t.append("perPage",this.returnPerPage),t.append("searchString",this.searchString);const e=await this.sendServerRequest(uip_ajax.ajax_url,t);e.error&&(this.uipApp.notifications.notify(e.message,"","error",!0),this.searching=!1,this.loading=!1),e.success&&(this.loading=!1,this.results=e.posts,this.totalPages=e.totalPages)},goBack(){this.page>1&&(this.page=this.page-1)},goForward(){this.page<this.totalPages&&(this.page=this.page+1)},returnStatusBG(t){let e="uip-background-orange-wash";switch(t){case"completed":e="uip-background-primary-wash";break;case"processing":e="uip-background-green-wash";break;case"failed":e="uip-background-red-wash"}return e}},template:'\n\t\t\t<div class="uip-flex uip-flex-column uip-row-gap-s">\n\t\t\t  <div class="uip-flex uip-flex-column uip-row-gap-xs uip-list-area">\n\t\t\t  \n\t\t\t  \n\t\t\t  \t<div v-if="!hasSearch" class="uip-flex uip-padding-xxs uip-border uip-search-block uip-border-round uip-margin-bottom-s">\n\t\t\t\t\t  <span class="uip-icon uip-text-muted uip-margin-right-xs uip-text-l uip-icon uip-icon-medium">search</span>\n\t\t\t\t\t  <input class="uip-blank-input uip-flex-grow uip-text-s" type="search" :placeholder="strings.searchOrders" v-model="searchString">\n\t\t\t\t</div>\n\t\t\t\t  \n\t\t\t\t  \n\t\t\t\t<div v-if="loading" class="uip-flex uip-flex-center uip-flex-middle uip-padding-m"><loading-chart></loading-chart></div>\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t<div v-if="!loading" class="uip-max-w-100p uip-overflow-auto uip-scrollbar">\n\t\t\t\t\t<table class="uip-min-w-250 uip-w-100p uip-table">\n\t\t\t\t\t  <thead>\n\t\t\t\t\t\t<tr class="">\n\t\t\t\t\t\t  <th class="uip-text-muted uip-text-weight-normal uip-text-left uip-padding-bottom-xxs">{{strings.order}}</th>\n\t\t\t\t\t\t  <th class="uip-text-muted uip-text-weight-normal uip-text-right uip-padding-bottom-xxs">{{strings.status}}</th>\n\t\t\t\t\t\t  <th class="uip-text-right uip-text-muted uip-text-weight-normal uip-padding-bottom-xxs">{{strings.total}}</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t  </thead>\n\t\t\t\t\t  <tbody>\n\t\t\t\t\t\t<tr v-for="item in results">\n\t\t\t\t\t\t  <td class="uip-text-bold uip-padding-bottom-xxs"><a class="uip-link-default uip-no-underline" :href="item.editLink">{{item.name}}</a></td>\n\t\t\t\t\t\t  \n\t\t\t\t\t\t  <td class="uip-text-right uip-padding-bottom-xxs uip-flex uip-flex-right">\n\t\t\t\t\t\t  \t<div class="uip-text-s uip-border-round uip-padding-xxxs uip-post-type-label" :class="returnStatusBG(item.status)">{{item.status}}</div>\n\t\t\t\t\t\t  </td>\n\t\t\t\t\t\t  \n\t\t\t\t\t\t  <td class="uip-text-right uip-padding-bottom-xxs">\n\t\t\t\t\t\t\t<div class=" uip-background-orange-wash uip-border-round uip-padding-xxxs uip-post-type-label uip-flex uip-gap-xxs uip-flex-center uip-text-bold uip-tag-label uip-inline-flex">\n\t\t\t\t\t\t\t  <span class="" v-html="item.total"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t  </td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t  </tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t<div v-if="results.length == 0 && searchString.length > 0" class="uip-text-muted uip-text-s">\n\t\t\t\t  {{strings.nothingFound}}\n\t\t\t\t</div>\n\t\t\t  </div>\n\t\t\t  <div class="uip-flex uip-gap-xs" v-if="totalPages > 1">\n\t\t\t\t<button @click="goBack" class="uip-button-default uip-icon uip-nav-button">chevron_left</button>\n\t\t\t\t<button @click="goForward" v-if="page < totalPages" class="uip-button-default uip-icon uip-nav-button">chevron_right</button>\n\t\t\t  </div>\n\t\t\t</div>'};